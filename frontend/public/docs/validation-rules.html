<!DOCTYPE html>
<html lang="en">

<!-- Mirrored from docid.africapidalliance.org/docs/validation-rules.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 08 Oct 2025 09:58:38 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DOCiD Metadata Schema - Validation Rules</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="doc-wrapper">
        <!-- Sidebar Navigation -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2>DOCiD Schema</h2>
                <div class="version-info">Version 1.0</div>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title">Documentation</div>
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="index.html" class="nav-link">Introduction</a>
                        </li>
                        <li class="nav-item">
                            <a href="architecture.html" class="nav-link">System Architecture</a>
                        </li>
                        <li class="nav-item">
                            <a href="metadata-schema.html" class="nav-link">Metadata Properties</a>
                            <ul class="nav-sublist">
                                <li class="nav-item">
                                    <a href="metadata-schema.html#core-properties" class="nav-link">Core Properties (1-20)</a>
                                </li>
                                <li class="nav-item">
                                    <a href="metadata-schema.html#publication-model" class="nav-link">Publication Model</a>
                                </li>
                                <li class="nav-item">
                                    <a href="metadata-schema.html#creator-model" class="nav-link">Creator Management</a>
                                </li>
                                <li class="nav-item">
                                    <a href="metadata-schema.html#controlled-vocabularies" class="nav-link">Controlled Vocabularies</a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a href="api-reference.html" class="nav-link">API Reference</a>
                            <ul class="nav-sublist">
                                <li class="nav-item">
                                    <a href="api-reference.html#authentication-endpoints" class="nav-link">Authentication</a>
                                </li>
                                <li class="nav-item">
                                    <a href="api-reference.html#publication-endpoints" class="nav-link">Publications</a>
                                </li>
                                <li class="nav-item">
                                    <a href="api-reference.html#comments-endpoints" class="nav-link">Comments System</a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a href="external-services.html" class="nav-link">External Services</a>
                            <ul class="nav-sublist">
                                <li class="nav-item">
                                    <a href="external-services.html#cordra-integration" class="nav-link">CORDRA</a>
                                </li>
                                <li class="nav-item">
                                    <a href="external-services.html#crossref-integration" class="nav-link">Crossref</a>
                                </li>
                                <li class="nav-item">
                                    <a href="external-services.html#apa-handle-integration" class="nav-link">APA Handle ID</a>
                                </li>
                                <li class="nav-item">
                                    <a href="external-services.html#datacite-integration" class="nav-link">Datacite</a>
                                </li>
                                <li class="nav-item">
                                    <a href="external-services.html#cstr-integration" class="nav-link">CSTR</a>
                                </li>
                                <li class="nav-item">
                                    <a href="external-services.html#ror-integration" class="nav-link">ROR</a>
                                </li>
                                <li class="nav-item">
                                    <a href="external-services.html#orcid-integration" class="nav-link">ORCID</a>
                                </li>
                                <li class="nav-item">
                                    <a href="external-services.html#ark-keys-integration" class="nav-link">ARK Keys</a>
                                </li>
                                <li class="nav-item">
                                    <a href="external-services.html#local-contexts-integration" class="nav-link">Local Contexts</a>
                                </li>
                                <li class="nav-item">
                                    <a href="external-services.html#arxiv-integration" class="nav-link">ArXiv ID</a>
                                </li>
                                <li class="nav-item">
                                    <a href="external-services.html#handle-id-integration" class="nav-link">Handle iD</a>
                                </li>
                                <li class="nav-item">
                                    <a href="external-services.html#hand-id-integration" class="nav-link">Hand iD</a>
                                </li>
                                <li class="nav-item">
                                    <a href="external-services.html#dpid-integration" class="nav-link">dPID</a>
                                </li>
                                <li class="nav-item">
                                    <a href="external-services.html#isni-integration" class="nav-link">ISNI</a>
                                </li>
                                <li class="nav-item">
                                    <a href="external-services.html#ringgold-integration" class="nav-link">Ringgold</a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
                
                <div class="nav-section">
                    <div class="nav-section-title">Properties</div>
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="properties-identifier.html" class="nav-link">Identifier</a>
                        </li>
                        <li class="nav-item">
                            <a href="properties-creator.html" class="nav-link">Creator</a>
                        </li>
                        <li class="nav-item">
                            <a href="properties-title.html" class="nav-link">Title</a>
                        </li>
                        <li class="nav-item">
                            <a href="properties-publisher.html" class="nav-link">Publisher</a>
                        </li>
                        <li class="nav-item">
                            <a href="properties-resource-type.html" class="nav-link">Resource Type</a>
                        </li>
                    </ul>
                </div>
                
                <div class="nav-section">
                    <div class="nav-section-title">Appendices</div>
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="controlled-vocabularies.html" class="nav-link">Controlled Vocabularies</a>
                        </li>
                        <li class="nav-item">
                            <a href="cultural-protocols.html" class="nav-link">Cultural Protocols</a>
                        </li>
                        <li class="nav-item">
                            <a href="validation-rules.html" class="nav-link active">Validation Rules</a>
                        </li>
                    </ul>
                </div>
            </nav>
        </aside>

        <!-- Mobile Menu Toggle -->
        <button class="mobile-menu-toggle" onclick="toggleSidebar()">☰</button>

        <!-- Main Content -->
        <main class="main-content">
            <div class="content-wrapper">
                <header class="doc-header">
                    <h1>Validation Rules</h1>
                    <div class="subtitle">Comprehensive validation requirements for DOCiD metadata schema compliance</div>
                </header>

                <!-- Core Validation -->
                <section id="core-validation">
                    <h2>Core Property Validation</h2>
                    
                    <div class="property">
                        <div class="property-header">
                            <div class="property-title">Required Field Validation</div>
                            <div class="property-meta">
                                <span class="property-badge">Critical</span>
                                <span>All publications</span>
                            </div>
                        </div>
                        <div class="property-content">
                            <p>Essential fields that must be present and valid for all publications:</p>
                            
                            <div class="table-wrapper">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Field</th>
                                            <th>Validation Rule</th>
                                            <th>Error Message</th>
                                            <th>Example</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>document_title</td>
                                            <td>Not null, 1-255 characters, UTF-8</td>
                                            <td>"Title is required and cannot exceed 255 characters"</td>
                                            <td>"Traditional Medicine in the Eastern Cape"</td>
                                        </tr>
                                        <tr>
                                            <td>document_docid</td>
                                            <td>Unique, format: DOCID.{INST}.{YEAR}.{NUM}</td>
                                            <td>"DocID must follow format DOCID.INST.YEAR.NUM"</td>
                                            <td>"DOCID.UCT.2024.001"</td>
                                        </tr>
                                        <tr>
                                            <td>doi</td>
                                            <td>Valid DOI format, 10.xxxxx/xxxxx</td>
                                            <td>"DOI must be valid format: 10.xxxxx/xxxxx"</td>
                                            <td>"10.5555/docid.2024.001"</td>
                                        </tr>
                                        <tr>
                                            <td>resource_type_id</td>
                                            <td>Must exist in resource_types table</td>
                                            <td>"Invalid resource type ID"</td>
                                            <td>1 (Dataset)</td>
                                        </tr>
                                        <tr>
                                            <td>published</td>
                                            <td>Valid datetime, not future unless embargoed</td>
                                            <td>"Publication date cannot be in future unless embargoed"</td>
                                            <td>"2024-03-15T10:00:00Z"</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Creator Validation -->
                <section id="creator-validation">
                    <h2>Creator Validation Rules</h2>
                    
                    <div class="property">
                        <div class="property-header">
                            <div class="property-title">Creator Information Validation</div>
                            <div class="property-meta">
                                <span class="property-badge">Required</span>
                                <span>PublicationCreators model</span>
                            </div>
                        </div>
                        <div class="property-content">
                            <p>Validation rules for creator and contributor information:</p>
                            
                            <div class="code-example">
                                <div class="code-header">Creator Validation Logic</div>
                                <div class="code-content">
                                    <pre><code>def validate_creator(creator_data):
    """
    Validate creator information according to DOCiD standards.
    """
    errors = []
    
    # Name validation
    if not creator_data.get('given_name') and not creator_data.get('family_name'):
        errors.append("Either given_name or family_name is required")
    
    if creator_data.get('given_name') and len(creator_data['given_name']) > 100:
        errors.append("Given name cannot exceed 100 characters")
        
    if creator_data.get('family_name') and len(creator_data['family_name']) > 100:
        errors.append("Family name cannot exceed 100 characters")
    
    # ORCID validation
    if creator_data.get('orcid'):
        if not re.match(r'^https://orcid\.org/\d{4}-\d{4}-\d{4}-\d{3}[\dX]$', 
                       creator_data['orcid']):
            errors.append("ORCID must be valid format: https://orcid.org/0000-0000-0000-0000")
    
    # Affiliation validation
    if creator_data.get('affiliation'):
        if len(creator_data['affiliation']) > 255:
            errors.append("Affiliation cannot exceed 255 characters")
    
    # Role validation
    if creator_data.get('role_id'):
        if not CreatorRole.query.get(creator_data['role_id']):
            errors.append("Invalid creator role ID")
    
    return errors</code></pre>
                                </div>
                            </div>
                            
                            <h4>Creator Validation Requirements:</h4>
                            <ul>
                                <li><strong>Name:</strong> At least one of given_name or family_name required</li>
                                <li><strong>ORCID:</strong> Valid ORCID URL format if provided</li>
                                <li><strong>Affiliation:</strong> Maximum 255 characters</li>
                                <li><strong>Role:</strong> Must exist in creators_roles controlled vocabulary</li>
                                <li><strong>Email:</strong> Valid email format if provided</li>
                                <li><strong>Order:</strong> Unique ordering within publication</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Organization Validation -->
                <section id="organization-validation">
                    <h2>Organization Validation Rules</h2>
                    
                    <div class="property">
                        <div class="property-header">
                            <div class="property-title">Publisher/Organization Validation</div>
                            <div class="property-meta">
                                <span class="property-badge">Required</span>
                                <span>PublicationOrganization model</span>
                            </div>
                        </div>
                        <div class="property-content">
                            <p>Validation for publisher and organizational affiliations:</p>
                            
                            <div class="code-example">
                                <div class="code-header">Organization Validation Logic</div>
                                <div class="code-content">
                                    <pre><code>def validate_organization(org_data):
    """
    Validate organization information including ROR integration.
    """
    errors = []
    
    # Name validation
    if not org_data.get('name'):
        errors.append("Organization name is required")
    elif len(org_data['name']) > 255:
        errors.append("Organization name cannot exceed 255 characters")
    
    # Type validation
    if not org_data.get('type'):
        errors.append("Organization type is required")
    elif org_data['type'] not in VALID_ORG_TYPES:
        errors.append(f"Invalid organization type: {org_data['type']}")
    
    # ROR ID validation
    if org_data.get('identifier') and org_data.get('identifier_type') == 'ror':
        if not re.match(r'^https://ror\.org/[a-z0-9]+$', org_data['identifier']):
            errors.append("ROR ID must be valid format: https://ror.org/xxxxxxx")
        
        # Verify ROR ID exists (API call)
        if not verify_ror_id(org_data['identifier']):
            errors.append("ROR ID not found in ROR registry")
    
    # Country validation
    if org_data.get('country'):
        if org_data['country'] not in ISO_COUNTRY_CODES:
            errors.append("Country must use ISO 3166-1 alpha-2 code")
    
    return errors

VALID_ORG_TYPES = [
    'University', 'Research Institute', 'Government', 'NGO', 
    'Company', 'Foundation', 'Network', 'Other'
]</code></pre>
                                </div>
                            </div>
                            
                            <h4>Organization Validation Requirements:</h4>
                            <ul>
                                <li><strong>Name:</strong> Required, maximum 255 characters</li>
                                <li><strong>Type:</strong> Must use controlled vocabulary</li>
                                <li><strong>ROR ID:</strong> Valid ROR format and verified against ROR API</li>
                                <li><strong>Country:</strong> ISO 3166-1 alpha-2 country codes</li>
                                <li><strong>Uniqueness:</strong> Same organization cannot be listed multiple times</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Identifier Validation -->
                <section id="identifier-validation">
                    <h2>Identifier Validation Rules</h2>
                    
                    <div class="property">
                        <div class="property-header">
                            <div class="property-title">Persistent Identifier Validation</div>
                            <div class="property-meta">
                                <span class="property-badge">Critical</span>
                                <span>Multiple identifier types</span>
                            </div>
                        </div>
                        <div class="property-content">
                            <p>Validation rules for different types of persistent identifiers:</p>
                            
                            <div class="table-wrapper">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Identifier Type</th>
                                            <th>Format</th>
                                            <th>Validation Pattern</th>
                                            <th>Example</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>DOI</td>
                                            <td>10.xxxxx/xxxxx</td>
                                            <td><code>^10\.\d+/.+$</code></td>
                                            <td>10.5555/docid.2024.001</td>
                                        </tr>
                                        <tr>
                                            <td>Handle</td>
                                            <td>hdl:prefix/suffix or URL</td>
                                            <td><code>^(hdl:|https://hdl\.handle\.net/).+$</code></td>
                                            <td>https://hdl.handle.net/20.500.12345/123</td>
                                        </tr>
                                        <tr>
                                            <td>DocID</td>
                                            <td>DOCID.INST.YEAR.NUM</td>
                                            <td><code>^DOCID\.[A-Z]+\.\d{4}\.\d+$</code></td>
                                            <td>DOCID.UCT.2024.001</td>
                                        </tr>
                                        <tr>
                                            <td>CSTR</td>
                                            <td>CSTR:xxxxx.xx.xxxx-xxxx</td>
                                            <td><code>^CSTR:\d+\.\d+\.[A-Z0-9]+-\d+$</code></td>
                                            <td>CSTR:16389.09.A08V-0001</td>
                                        </tr>
                                        <tr>
                                            <td>URN</td>
                                            <td>urn:namespace:identifier</td>
                                            <td><code>^urn:[a-z0-9][a-z0-9-]*:.+$</code></td>
                                            <td>urn:nbn:za:uct-123456</td>
                                        </tr>
                                        <tr>
                                            <td>URL</td>
                                            <td>Valid HTTP/HTTPS URL</td>
                                            <td><code>^https?://[^\s]+$</code></td>
                                            <td>https://example.org/dataset/123</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <div class="code-example">
                                <div class="code-header">Identifier Validation Implementation</div>
                                <div class="code-content">
                                    <pre><code>def validate_identifier(identifier_value, identifier_type):
    """
    Validate different types of persistent identifiers.
    """
    patterns = {
        'DOI': r'^10\.\d+/.+$',
        'Handle': r'^(hdl:|https://hdl\.handle\.net/).+$',
        'DocID': r'^DOCID\.[A-Z]+\.\d{4}\.\d+$',
        'CSTR': r'^CSTR:\d+\.\d+\.[A-Z0-9]+-\d+$',
        'URN': r'^urn:[a-z0-9][a-z0-9-]*:.+$',
        'URL': r'^https?://[^\s]+$'
    }
    
    if identifier_type not in patterns:
        return False, f"Unknown identifier type: {identifier_type}"
    
    pattern = patterns[identifier_type]
    if not re.match(pattern, identifier_value):
        return False, f"Invalid {identifier_type} format"
    
    # Additional validations
    if identifier_type == 'DOI':
        # Check DOI resolution (optional)
        return validate_doi_resolution(identifier_value)
    elif identifier_type == 'DocID':
        # Check uniqueness in database
        return validate_docid_uniqueness(identifier_value)
    
    return True, "Valid identifier"</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Date Validation -->
                <section id="date-validation">
                    <h2>Date and Time Validation</h2>
                    
                    <div class="property">
                        <div class="property-header">
                            <div class="property-title">Publication Date Validation</div>
                            <div class="property-meta">
                                <span class="property-badge">Required</span>
                                <span>DateTime fields</span>
                            </div>
                        </div>
                        <div class="property-content">
                            <p>Comprehensive validation for date and time fields:</p>
                            
                            <div class="code-example">
                                <div class="code-header">Date Validation Logic</div>
                                <div class="code-content">
                                    <pre><code>def validate_publication_dates(publication_data):
    """
    Validate all date fields in publication.
    """
    errors = []
    current_time = datetime.utcnow()
    
    # Required published date
    if not publication_data.get('published'):
        errors.append("Published date is required")
        return errors
    
    published = parse_datetime(publication_data['published'])
    
    # Publication year extraction
    publication_year = published.year
    if publication_year < 1000 or publication_year > current_time.year + 10:
        errors.append(f"Publication year {publication_year} is out of valid range")
    
    # Embargo validation
    embargo_until = publication_data.get('embargo_until')
    if embargo_until:
        embargo_date = parse_datetime(embargo_until)
        
        if embargo_date <= current_time:
            errors.append("Embargo end date must be in the future")
        
        if embargo_date >= published:
            errors.append("Embargo end date must be before publication date")
    
    # Created vs published date consistency
    created_at = publication_data.get('created_at', current_time)
    if published < created_at:
        errors.append("Published date cannot be before creation date")
    
    # Future publication validation
    if published > current_time and not embargo_until:
        errors.append("Future publication dates require embargo information")
    
    return errors</code></pre>
                                </div>
                            </div>
                            
                            <h4>Date Validation Rules:</h4>
                            <ul>
                                <li><strong>Published Date:</strong> Required, ISO 8601 format</li>
                                <li><strong>Year Range:</strong> Between 1000 and current year + 10</li>
                                <li><strong>Embargo Logic:</strong> End date must be future, before publication</li>
                                <li><strong>Chronological Order:</strong> Created ≤ Published ≤ Embargo End</li>
                                <li><strong>Future Dates:</strong> Require embargo justification</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Language Validation -->
                <section id="language-validation">
                    <h2>Language and Content Validation</h2>
                    
                    <div class="property">
                        <div class="property-header">
                            <div class="property-title">Multilingual Content Validation</div>
                            <div class="property-meta">
                                <span class="property-badge">Optional</span>
                                <span>ISO 639-1 codes</span>
                            </div>
                        </div>
                        <div class="property-content">
                            <p>Validation for multilingual content and language codes:</p>
                            
                            <div class="code-example">
                                <div class="code-header">Language Validation Example</div>
                                <div class="code-content">
                                    <pre><code>def validate_language_content(metadata):
    """
    Validate language codes and multilingual content.
    """
    errors = []
    
    # Valid ISO 639-1 language codes for African context
    VALID_LANGUAGE_CODES = [
        'en', 'af', 'zu', 'xh', 'sw', 'ha', 'yo', 'am', 'ar', 'fr', 'pt',
        'st', 'tn', 've', 'ts', 'ss', 'nr', 'nso', 'lg', 'ak', 'tw'
    ]
    
    # Validate titles with language codes
    if 'titles' in metadata:
        for title in metadata['titles']:
            if 'lang' in title:
                if title['lang'] not in VALID_LANGUAGE_CODES:
                    errors.append(f"Invalid language code: {title['lang']}")
            
            if 'titleType' in title:
                valid_types = ['MainTitle', 'Subtitle', 'AlternativeTitle', 
                              'TranslatedTitle', 'Other']
                if title['titleType'] not in valid_types:
                    errors.append(f"Invalid title type: {title['titleType']}")
    
    # Validate abstract languages
    if 'abstracts' in metadata:
        for abstract in metadata['abstracts']:
            if 'lang' in abstract and abstract['lang'] not in VALID_LANGUAGE_CODES:
                errors.append(f"Invalid abstract language code: {abstract['lang']}")
    
    return errors</code></pre>
                                </div>
                            </div>
                            
                            <h4>Language Validation Requirements:</h4>
                            <ul>
                                <li><strong>Language Codes:</strong> ISO 639-1 standard codes</li>
                                <li><strong>African Languages:</strong> Extended support for African language codes</li>
                                <li><strong>UTF-8 Encoding:</strong> All text content must be valid UTF-8</li>
                                <li><strong>Title Types:</strong> Controlled vocabulary for title classifications</li>
                                <li><strong>Consistency:</strong> Language codes consistent across related fields</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Cultural Protocol Validation -->
                <section id="cultural-validation">
                    <h2>Cultural Protocol Validation</h2>
                    
                    <div class="property">
                        <div class="property-header">
                            <div class="property-title">Traditional Knowledge Validation</div>
                            <div class="property-meta">
                                <span class="property-badge">Conditional</span>
                                <span>Cultural protocols</span>
                            </div>
                        </div>
                        <div class="property-content">
                            <p>Validation rules for cultural protocols and traditional knowledge:</p>
                            
                            <div class="code-example">
                                <div class="code-header">Cultural Protocol Validation</div>
                                <div class="code-content">
                                    <pre><code>def validate_cultural_protocols(metadata):
    """
    Validate cultural protocols and traditional knowledge labels.
    """
    errors = []
    
    if 'cultural_protocols' not in metadata:
        return errors
    
    protocols = metadata['cultural_protocols']
    
    # Traditional Knowledge validation
    if 'traditional_knowledge' in protocols:
        tk = protocols['traditional_knowledge']
        
        if tk.get('has_tk') and not tk.get('tk_labels'):
            errors.append("TK labels required when has_tk is true")
        
        if tk.get('tk_labels'):
            valid_labels = ['TK A', 'TK NC', 'TK CO', 'TK CS', 'TK CB', 'TK CL']
            for label in tk['tk_labels']:
                if label.get('code') not in valid_labels:
                    errors.append(f"Invalid TK label code: {label.get('code')}")
                
                if not label.get('community'):
                    errors.append("Community name required for TK labels")
    
    # Community consent validation
    if 'community_consent' in protocols:
        consent = protocols['community_consent']
        
        if consent.get('consent_obtained') and not consent.get('consenting_authority'):
            errors.append("Consenting authority required when consent obtained")
        
        if consent.get('consent_date'):
            try:
                consent_date = parse_datetime(consent['consent_date'])
                if consent_date > datetime.utcnow():
                    errors.append("Consent date cannot be in the future")
            except ValueError:
                errors.append("Invalid consent date format")
    
    return errors</code></pre>
                                </div>
                            </div>
                            
                            <h4>Cultural Protocol Requirements:</h4>
                            <ul>
                                <li><strong>TK Labels:</strong> Valid Local Contexts TK label codes</li>
                                <li><strong>Community Information:</strong> Community name required for TK labels</li>
                                <li><strong>Consent Documentation:</strong> Consent authority and date validation</li>
                                <li><strong>Access Restrictions:</strong> Consistent with publication visibility</li>
                                <li><strong>Benefit Sharing:</strong> Agreement details when applicable</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Error Handling -->
                <section id="error-handling">
                    <h2>Error Handling and Reporting</h2>
                    
                    <div class="property">
                        <div class="property-header">
                            <div class="property-title">Validation Error Response Format</div>
                            <div class="property-meta">
                                <span class="property-badge">Standard</span>
                                <span>API responses</span>
                            </div>
                        </div>
                        <div class="property-content">
                            <p>Standardized error response format for validation failures:</p>
                            
                            <div class="code-example">
                                <div class="code-header">Validation Error Response</div>
                                <div class="code-content">
                                    <pre><code>POST /api/v1/publications/publish
Content-Type: application/json

{
    "document_title": "",  // Invalid: empty title
    "document_docid": "INVALID-FORMAT",  // Invalid: wrong format
    "creators": []  // Invalid: no creators
}

Response (400 Bad Request):
{
    "status": "error",
    "message": "Validation failed",
    "error_code": "VALIDATION_ERROR",
    "validation_errors": [
        {
            "field": "document_title",
            "code": "REQUIRED_FIELD",
            "message": "Title is required and cannot be empty",
            "value": ""
        },
        {
            "field": "document_docid",
            "code": "INVALID_FORMAT", 
            "message": "DocID must follow format DOCID.INST.YEAR.NUM",
            "value": "INVALID-FORMAT",
            "expected_format": "DOCID.{INSTITUTION}.{YEAR}.{NUMBER}"
        },
        {
            "field": "creators",
            "code": "MINIMUM_REQUIRED",
            "message": "At least one creator is required",
            "minimum": 1,
            "provided": 0
        }
    ],
    "request_id": "req_123456789",
    "timestamp": "2024-08-15T14:30:00Z"
}</code></pre>
                                </div>
                            </div>
                            
                            <h4>Error Response Components:</h4>
                            <ul>
                                <li><strong>Field-Specific Errors:</strong> Each validation error tied to specific field</li>
                                <li><strong>Error Codes:</strong> Machine-readable error classification</li>
                                <li><strong>Human-Readable Messages:</strong> Clear explanations for users</li>
                                <li><strong>Expected Values:</strong> Guidance on correct formats</li>
                                <li><strong>Request Tracking:</strong> Unique request ID for debugging</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Navigation -->
                <div class="page-nav">
                    <a href="cultural-protocols.html" class="nav-prev">Cultural Protocols</a>
                    <div></div>
                </div>
            </div>

            <!-- Footer -->
                <footer class="doc-footer">
                    <p><strong>DOCiD Metadata Schema Documentation v1.0</strong></p>
                    <p>Validation Rules • African PID Alliance</p>
                    <div class="license">
                        <p>This documentation is licensed under <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">Creative Commons Attribution 4.0 International (CC BY 4.0)</a></p>
                    </div>
                </footer>
            </div>
        </main>
    </div>

    <!-- Scroll to Top Button -->
    <button class="scroll-top" id="scrollTop" onclick="scrollToTop()">↑</button>

    <script>
        // Sidebar toggle for mobile
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('open');
        }

        // Scroll to top functionality
        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Show/hide scroll to top button
        window.addEventListener('scroll', function() {
            const scrollTop = document.getElementById('scrollTop');
            if (window.pageYOffset > 300) {
                scrollTop.classList.add('visible');
            } else {
                scrollTop.classList.remove('visible');
            }
        });

        // Close sidebar on mobile when clicking outside
        document.addEventListener('click', function(event) {
            const sidebar = document.getElementById('sidebar');
            const toggle = document.querySelector('.mobile-menu-toggle');
            
            if (window.innerWidth <= 768 && 
                !sidebar.contains(event.target) && 
                !toggle.contains(event.target) && 
                sidebar.classList.contains('open')) {
                sidebar.classList.remove('open');
            }
        });
    </script>
</body>

<!-- Mirrored from docid.africapidalliance.org/docs/validation-rules.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 08 Oct 2025 09:58:38 GMT -->
</html>